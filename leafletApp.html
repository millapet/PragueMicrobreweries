<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Prague Microbreweries</title>
    <style>
      html, body, #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
	 <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
   integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
   crossorigin="">
   </script>
   <script src="pivovary.geojson" type="text/javascript"></script>
  </head>
  <body>
    <div id="mymap" style= "width: 100%; height: 100%" ></div>
	<script type="text/javascript">
		//var mymap = L.map('mymap').setView([50.082903, 14.424060], 12);
		var map = L.map('mymap');
		map.locate({setView: true, maxZoom: 16});
		
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>, <a href="https://icons8.com/icon/43489/beer">Beer icon by Icons8</a>',
			maxZoom: 18,
			id: 'mapbox.light',
			accessToken: 'pk.eyJ1IjoibWlsbGFwZXQiLCJhIjoiY2pycGRqNHYzMTl4MDN6cGpyZGpsYjRybyJ9.IWzPKinWNt-NvEGxkiJ97g'
		}).addTo(map);
		
		var geojsonMarker =	L.icon({
			iconUrl: 'https://img.icons8.com/plasticine/42/000000/beer.png',
			iconAnchor: [21,21],
			popupAnchor: [0,-21]
		});
		
		var youAreHereMarker = L.icon({
			iconUrl: 'https://img.icons8.com/doodle/48/000000/chevron-down.png',
			iconAnchor: [24,48],
			popupAnchor: [0,-48]
		});
		
		function onEachFeature(feature, layer){
			if (feature.properties && feature.properties.nazev) {
				layer.bindPopup('<font size="3"><p><b>'+feature.properties.nazev+'</b></font><br /><font size="3">'+feature.properties.adresa+'</p></font>');
			}
		}
				
		L.geoJSON(pivovary, {
			pointToLayer: function (feature, latlng) {
				return L.marker(latlng, {icon: geojsonMarker});},
			onEachFeature: onEachFeature
		}).addTo(map);
		
		function onLocationFound(e){
			L.marker(e.latlng, {icon: youAreHereMarker}).addTo(map)
				.bindPopup('<font size="3"> You are here </font>').openPopup();
		}
		map.on('locationfound', onLocationFound);
	</script>
  </body>
</html>
